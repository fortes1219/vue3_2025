import{a as $,k as D,b as T,c as q,l as A,m as F,n as R,o as S}from"./element-plus.CKozIfrw.js";import{aQ as b,aR as O,m as I,o as _,_ as w,Z as m,a,a2 as f,V as p,a1 as k,aS as c,c as x,F as P,ap as V,u as B,r as C}from"./vendor.NXPq8Yx5.js";const U={class:"flex justify-between items-center"},j={class:"text-lg font-medium"},W={class:"my-4"},z={class:"text-xl"},G={__name:"productCard",props:b({product:{type:Object}},{quantity:{type:Number,default:1},quantityModifiers:{}}),emits:b(["add-to-cart"],["update:quantity"]),setup(s,{emit:v}){const d=s,g=v,y=O(s,"quantity"),i={PERCENTAGE:(e,t)=>{const n=new c(e),o=new c(1).minus(new c(t));return n.mul(o).toDecimalPlaces(0)},FIXED:(e,t)=>{const n=new c(e),o=new c(t);return n.minus(o).toDecimalPlaces(0)},NONE:e=>new c(e)},l=I(()=>{const{price:e,discountType:t,discount:n}=d.product;return(i[t]??i.NONE)(e,n).toNumber()}),r=e=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(e);return(e,t)=>{const n=$,o=D,E=T,N=q;return _(),w(N,{shadow:"hover"},{header:m(()=>[a("div",U,[a("span",j,f(s.product.name),1),p(n,{type:s.product.stock<5?"danger":"success"},{default:m(()=>[k(f(`Stock: ${s.product.stock}`),1)]),_:1},8,["type"])])]),default:m(()=>[a("div",W,[a("div",null,"Original Price: "+f(r(s.product.price)),1),a("div",z,f(r(l.value)),1)]),a("div",null,[p(o,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=u=>y.value=u),min:1,max:s.product.stock},null,8,["modelValue","max"]),p(E,{type:"primary",disabled:!s.product.stock,onClick:t[1]||(t[1]=u=>g("add-to-cart",y.value))},{default:m(()=>t[2]||(t[2]=[k(" Add to Cart ")])),_:1},8,["disabled"])])]),_:1})}}},M={class:"flex justify-between items-center"},X={class:"flex justify-between items-center"},L={class:"flex items-center gap-2"},Q={class:"text-sm text-gray-600 text-right"},Z={__name:"shoppingCart",props:{cartItems:{type:Array,default:()=>[]}},emits:["update-quantity","remove-item"],setup(s,{emit:v}){const d=s,g=v,y=I(()=>d.cartItems.reduce((e,t)=>new c(e).plus(r(t)).toNumber(),0)),i={PERCENTAGE:(e,t)=>{const n=new c(e),o=new c(1).minus(new c(t));return n.mul(o).toDecimalPlaces(0)},FIXED:(e,t)=>{const n=new c(e),o=new c(t);return n.minus(o).toDecimalPlaces(0)},NONE:e=>new c(e)},l=e=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(e),r=e=>{const{price:t,discountType:n,discount:o}=e;return(i[n]??i.NONE)(t,o).mul(e.quantity).toNumber()};return(e,t)=>{const n=D,o=T,E=F,N=q;return _(),w(N,{class:"shopping-cart"},{header:m(()=>[a("div",M,[t[0]||(t[0]=a("span",null,"Shopping Cart",-1)),a("span",null,f(l(y.value)),1)])]),default:m(()=>[s.cartItems.length?(_(!0),x(P,{key:0},V(s.cartItems,u=>(_(),x("div",{key:u.id,class:"my-2"},[a("div",X,[a("span",null,f(u.name),1),a("div",L,[p(n,{modelValue:u.quantity,"onUpdate:modelValue":h=>u.quantity=h,min:1,max:u.stock,onChange:h=>g("update-quantity",u.id,h)},null,8,["modelValue","onUpdate:modelValue","max","onChange"]),p(o,{type:"danger",icon:B(A),circle:"",size:"small",onClick:h=>g("remove-item",u.id)},null,8,["icon","onClick"])])]),a("div",Q,"Sub Total: "+f(l(r(u))),1)]))),128)):(_(),w(E,{key:1,description:"Cart is empty!"}))]),_:1})}}},H={class:"container mx-auto p-4"},J={class:"grid grid-cols-2 gap-4"},tt={__name:"day-2",setup(s){const v=C([{id:1,name:"機械鍵盤",price:2e3,stock:20,discountType:"PERCENTAGE",discount:.1},{id:2,name:"無線滑鼠",price:1e3,stock:20,discountType:"FIXED",discount:100}]),d=C([]),g=(i,l)=>{const r=d.value.find(e=>e.id===i.id);if(r){r.quantity+=l;return}d.value.push({...i,quantity:l})},y=i=>{d.value=d.value.filter(l=>l.id!==i)};return(i,l)=>{const r=S,e=R;return _(),x("div",H,[p(e,{gutter:20},{default:m(()=>[p(r,{span:16},{default:m(()=>[a("div",J,[(_(!0),x(P,null,V(v.value,t=>(_(),w(G,{key:t.id,quantity:t.quantity,"onUpdate:quantity":n=>t.quantity=n,product:t,onAddToCart:n=>g(t,n)},null,8,["quantity","onUpdate:quantity","product","onAddToCart"]))),128))])]),_:1}),p(r,{span:8},{default:m(()=>[p(Z,{cartItems:d.value,onRemoveItem:y},null,8,["cartItems"])]),_:1})]),_:1})])}}};export{tt as default};
