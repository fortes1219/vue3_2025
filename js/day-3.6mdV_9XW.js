import{c as S,e as T,p as B,q as $,r as b,b as F,f as I,g as N}from"./element-plus.CKozIfrw.js";import{_ as L}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{r as _,ax as U,p as D,_ as f,Z as a,o as u,a as t,V as n,a2 as c,a3 as W,a1 as z,c as P,ap as R,S as Z,F as j,aT as q}from"./vendor.NXPq8Yx5.js";const A={class:"user-info"},G={class:"log-header"},H={class:"time"},J={__name:"day-3",setup(K){const i=_(""),o=_(null),p=_(!1),v=_([]),y=async l=>(await new Promise(e=>setTimeout(e,1500)),{name:`User ${l}`,email:`${l}@example.com`,phone:"1234567890"}),m=(l,e="info")=>{v.value.unshift({time:new Date().toLocaleTimeString(),message:l,type:e})};let h=0;return U(()=>{console.log("#### Effect searchQuery:",i.value),console.log("#### Effect effectVal:",h)}),D(i,async l=>{if(!l.trim()){o.value=null;return}h++;let e=!1;q(()=>{e=!0,m("取消前次搜索請求","warning")}),p.value=!0,m(`開始搜索: ${l}`,"primary");try{const r=await y(l);e||(o.value=r,m(`搜索完成: 找到使用者 ${r.name}`,"success"))}catch{e||m("搜索失敗","danger")}finally{e||(p.value=!1)}},{immediate:!0}),(l,e)=>{const r=T,E=B,g=$,V=b,d=S,k=F,w=I,x=N;return u(),f(d,{class:"cleanup-demo"},{header:a(()=>e[2]||(e[2]=[t("h3",null,"Vue 3.5 onWatcherCleanup 示範",-1)])),default:a(()=>[n(g,null,{default:a(()=>[n(E,{label:"搜索使用者"},{default:a(()=>[n(r,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),placeholder:"輸入使用者名稱",icon:"Search"},null,8,["modelValue"])]),_:1})]),_:1}),p.value?(u(),f(d,{key:0,shadow:"never",class:"result-card"},{default:a(()=>[n(V,{rows:3,animated:""})]),_:1})):o.value?(u(),f(d,{key:1,shadow:"never",class:"result-card"},{header:a(()=>e[3]||(e[3]=[t("div",{class:"result-header"},"搜索結果",-1)])),default:a(()=>[t("div",A,[t("div",null,"姓名："+c(o.value.name),1),t("div",null,"郵箱："+c(o.value.email),1),t("div",null,"電話："+c(o.value.phone),1)])]),_:1})):W("",!0),n(d,{class:"mt-4"},{header:a(()=>[t("div",G,[e[5]||(e[5]=t("span",null,"操作日誌",-1)),n(k,{text:"",onClick:e[1]||(e[1]=s=>v.value=[])},{default:a(()=>e[4]||(e[4]=[z("清除日誌")])),_:1})])]),default:a(()=>[n(x,null,{default:a(()=>[(u(!0),P(j,null,R(v.value,(s,C)=>(u(),f(w,{key:C,type:s.type},{default:a(()=>[t("span",H,c(s.time),1),t("span",{class:Z(["message",s.type])},c(s.message),3)]),_:2},1032,["type"]))),128))]),_:1})]),_:1})]),_:1})}}},X=L(J,[["__scopeId","data-v-1b9ca97e"]]);export{X as default};
